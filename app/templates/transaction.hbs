{{title model.description}}
{{remember-document-scroll key=(concat 'expense/' model.id)}}

<section id="transaction" class="container">
  {{#form-for model name='transaction' autosave=true onsubmit=(route-action 'save') as |f|}}
    {{#f.nav ondelete=(route-action 'deleteRecord')}}
      {{#if model.paymentProcessorUrl}}
        <a href="{{model.paymentProcessorUrl}}" target="__blank" rel="nofollow noreferrer" class="submit-button">
          {{t 'transaction.actions.viewInStripe' icon=(icon "stripe") htmlSafe=true}}
        </a>
      {{/if}}
    {{/f.nav}}
    <div class="grid-column">
      <div class='grid-row'>
        {{f.text 'description'}}
        {{f.datetime 'paidAt'}}
      </div>
      <div class='grid-row'>
        {{f.currency 'amountPaid' 'currency' currencies=(list 'USD' 'EUR')}}
        {{f.currency 'amountOwed' 'currency' currencies=(list 'USD' 'EUR')}}
      </div>
      {{f.autocomplete 'paidBy' key='name' onquery=(route-action 'query' 'person')}}
      {{#if model.paidBy}}
        {{#link-to 'person' model.paidBy}}&rarr; {{model.paidBy.name}}{{/link-to}}
      {{/if}}
      {{f.editor 'notes' rows=3 markup=(list 'bold' 'italic' 'underline' 'emoji')}}
    </div>
  {{/form-for}}
</section>
