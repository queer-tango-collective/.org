{{title "People"}}

<section id="people">
  <header>
    {{search-field query=q onquery=(action (mut q)) placeholder="People"}}
  </header>
  <nav>
    <button type='submit' onclick={{action (mut isAdding) true}}>
      {{icon "person"}} Add Person
    </button>
    {{#if isAdding}}
      {{dialog-box (component 'new-person-dialog'
          onsubmit=(route-action 'createPerson'))
        ondismiss=(action (mut isAdding) false)}}
    {{/if}}
  </nav>
  {{#sortable-list rows=model.model total=model.meta.page.total sort=sort load=(route-action 'load') as |l|}}
    {{#l.item 'name' as |item|}}
      {{#link-to 'person' item~}}
        {{item.name}}
      {{~/link-to}}
    {{else}}
      Name
    {{/l.item}}
    {{#l.item 'email' as |item|}}
      {{item.email}}
    {{else}}
      Email
    {{/l.item}}
  {{/sortable-list}}
</section>
